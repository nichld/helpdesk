<!DOCTYPE html>
<html lang="en" class="<%= typeof isMessagesPage !== 'undefined' && isMessagesPage ? 'h-full' : '' %>">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><% if (typeof title !== 'undefined') { %><%= title %><% } else { %>Drift Guides<% } %></title>
  
  <!-- Add custom CSS with critical flag to ensure it's loaded first -->
  <link rel="stylesheet" href="/css/custom.css" importance="high">
  
  <% if (typeof style !== 'undefined') { %>
    <%- style %>
  <% } %>
  
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
</head>
<body class="bg-white <%= typeof isMessagesPage !== 'undefined' && isMessagesPage ? 'h-full flex flex-col' : 'h-[100dvh] flex flex-col justify-between' %>">
  
  <header class="sticky top-0 z-<%= typeof isMessagesPage !== 'undefined' && isMessagesPage ? '20' : '10' %>">
    <%- include('../partials/navbar') %>
  </header>

  <% if (typeof message !== 'undefined' && message) { %>
    <%- include('../partials/popup', { message: message }) %>
  <% } %>

  <main class="<%= typeof isMessagesPage !== 'undefined' && isMessagesPage 
    ? 'flex-1 p-0 max-w-full w-full mx-auto overflow-hidden' 
    : 'p-4 md:p-8 lg:p-12 py-8 md:py-12 w-full mb-auto mx-auto' %>">
    <%- body %>
  </main>
  
  <% if (typeof isMessagesPage === 'undefined' || !isMessagesPage) { %>
    <%- include('../partials/footer') %>
  <% } %>

  <!-- Toast notification container -->
  <div id="toast-container" class="fixed bottom-5 right-5 z-50"></div>

  <% if (typeof script !== 'undefined') { %>
    <%- script %>
  <% } %>
  <script src="/js/popup.js"></script>
  
  <!-- Include toast notifications script -->
  <script src="/js/toast.js"></script>
</body>
</html>